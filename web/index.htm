<!DOCTYPE html>
<head>
	<meta charset="utf-8" http-equiv="200" />
	<meta content="true" name="HandheldFriendly" />
	<title>Silk Web</title>
	<link rel="stylesheet" href="./css/bulma.css" />
	<link rel="stylesheet" href="./css/bulma_dark.css" />
	<link rel="stylesheet" href="./css/index.css" />
	<script defer src="./js/web.js"></script>
</head>
<body x-data="{navItem:['navbar-item','navbar-item is-active'],viewItem:['container is-hidden','container']}">
	<nav class="navbar container is-fixed-top" role="navigation" x-data="{navShow: false}">
		<div class="navbar-brand">
			<a class="navbar-item" href="#!/timeline">
				<b>Silk</b>
			</a>
			<a role="button" class="navbar-burger" @click="navShow=!navShow">
				<span></span>
				<span></span>
				<span></span>
			</a>
		</div>
		<div :class="`navbar-menu ${navShow?'is-active':''}`">
			<div class="navbar-start">
				<a :class="navItem[+($store.app.view=='timeline')]" href="#!/timeline" x-text="$store.str.tab.timeline"></a>
				<a :class="navItem[+($store.app.view=='discover')]" href="#!/discover" x-text="$store.str.tab.discover"></a>
				<a :class="navItem[+($store.app.view=='join')]" href="#!/join" x-text="$store.str.tab.join"></a>
			</div>
			<div class="navbar-end">
				<a :class="navItem[+($store.app.view=='about')]" href="#!/about" x-text="$store.str.tab.about"></a>
				<a class="navbar-item" href="https://kb.ltgc.cc/silk/" target="_blank" x-text="$store.str.tab.docs"></a>
			</div>
		</div>
	</nav>
	<div class="container">
		<div :class="viewItem[+($store.app.view=='timeline')]" id="tab-timeline">
			<template x-for="post in $store.posts">
				<div class="card fedipost">
					<div class="card-content">
						<article class="media fedipostuser">
							<figure class="media-left">
								<p class="image is-48x48">
									<img :src="post.user.avatar" decoding="async" loading="lazy"></img>
								</p>
							</figure>
							<div class="media-content">
								<p><b class="is-size-6" x-html="post.user.html || post.user.dispName || post.user.username"></b> <img class="darkinvert" :title="$store.str.post.bot" :alt="$store.str.post.bot" x-show="post.user.bot" src="./img/bot.svg"></img></p>
								<p><a><small class="is-size-7" x-text="post.handle"></small></a></p>
							</div>
							<div class="media-right">
								<p>
									<img class="darkinvert" :title="$store.str.post.edited" :alt="$store.str.post.edited.replace('${time}',formatTime(post.atNew,$store.str.lang.timedateFull))" x-show="post.atEdit>0" src="./img/edited.svg"></img>
									<span class="tag is-light" :title="$store.str.lang.lang" x-text="post.lang.toUpperCase()">EN</span>
								</p>
								<p>
									<span class="is-size-7" x-text="formatTime(post.atNew,$store.str.lang.timedate)" :title="formatTime(post.atNew,$store.str.lang.timedateFull)"></span>
								</p>
							</div>
						</article>
						<div class="content" x-html="post.html" :lang="post.lang"></div>
						<template x-if="post.media.length">
							<div class="content is-flex is-flex-direction-row is-flex-wrap-wrap is-justify-content-space-evenly is-align-content-center">
								<template x-for="pic in post.media">
									<div class="fediframe is-justify-content-center is-align-content-center">
										<template x-if="pic.type=='image'">
											<img :class="post.media.length==1?'fedipic':'fedipic multipic'" :src="pic.url" :alt="pic.alt" :title="pic.alt" fetchpriority="low" loading="lazy"></img>
										</template>
										<template x-if="pic.type=='gifv'">
											<video class="fedipic" :src="pic.url" :alt="pic.alt" :title="pic.alt" preload="metadata" :poster="pic.preview" autoplay controls loop></video>
										</template>
									</div>
								</template>
							</div>
						</template>
						<div class="fedistat is-size-6 is-flex is-flex-direction-row is-flex-wrap-wrap is-justify-content-space-evenly is-align-content-center">
							<div :title="$store.str.post.reply"><img src="./img/reply.svg" :alt="$store.str.post.reply"></img> <span x-text="post.sumReply">?</span></div>
							<div :title="$store.str.post.boost"><img src="./img/boost.svg" :alt="$store.str.post.boost"></img> <span x-text="post.sumBoost">?</span></div>
							<div :title="$store.str.post.like"><img :alt="$store.str.post.like" src="./img/fav.svg"></img> <span x-text="post.sumFav">?</span></div>
							<div :title="$store.str.post.open"><a target="_blank" :href="post.url"><img src="./img/open.svg"></img></a></div>
						</div>
					</div>
				</div>
			</template>
		</div>
		<div :class="viewItem[+($store.app.view=='discover')]" id="tab-discover">
			<div class="content" x-text="$store.str.global.comingSoon"></div>
		</div>
		<div :class="viewItem[+($store.app.view=='join')]" id="tab-join">
			<div class="content">
				<h3 x-text="$store.str.join.hadAcct"></h3>
				<p x-text="$store.str.join.hadAcctText"></p>
				<h3 x-text="$store.str.join.noAcct"></h3>
				<p x-text="$store.str.join.noAcctText"></p>
				<ul>
					<template x-for="server in $store.servers">
						<li>
							<a :href="'https://'+server.domain" target="_blank" x-text="server.domain" :class="server.active?'':'has-text-danger'"></a>
						</li>
					</template>
				</ul>
				<h3 x-text="$store.str.join.rndmInst"></h3>
				<p x-text="$store.str.join.rndmInstText"></p>
			</div>
		</div>
		<div :class="viewItem[+($store.app.view=='about')]" id="tab-about">
			<table class="table" style="margin: 0 auto">
				<thead>
					<tr>
						<th colspan="2" class="has-text-centered">Silk</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<th>Released by</th>
						<td><a href="https://ltgc.cc/" target="_blank">Lightingale Community</a></td>
					</tr>
					<tr>
						<th>Developed by</th>
						<td>Lumière Élevé</td>
					</tr>
					<tr>
						<th rowspan="3">Dependencies</th>
						<td><a href="https://alpinejs.dev/" target="_blank">AlpineJS</a></td>
					</tr>
					<tr>
						<td><a href="https://bulma.io/" target="_blank">Bulma</a></td>
					</tr>
					<tr>
						<td><a href="https://feathericons.com/" target="_blank">Feather</a></td>
					</tr>
					<tr>
						<th>Source code</th>
						<td><a href="https://github.com/ltgcgo/silk/" target="_blank">GitHub</a></td>
					</tr>
				</tbody>
			</table>
		</div>
	</div>
	<footer class="footer">
		<div class="content has-text-centered has-text-grey">
			<b>Silk</b> is a piece of open-source software licensed under GNU AGPL 3.0.
		</div>
	</footer>
</body>
